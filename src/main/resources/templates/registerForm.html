<html layout:decorate="~{layout}">
<div layout:fragment="content">
    <div style="position:relative">
        <div style="background:lightsalmon; width:100%; height:90vh;"></div>
        <div style="position:absolute; top:5%; left:20%; background:white; width:60%; height:80vh; border-radius:15px;"
             class="d-flex justify-content-center align-items-center">
            <div style="padding:30px; width:80%;">
                <h3 class="border-bottom pb-2 mb-2">가게 등록</h3>
                <form method="post" id="regForm">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <div class="form-floating mb-3">
                        <input type="text" placeholder="이름" name="name" id="name" class="form-control">
                        <label for="name" class="form-label">가게 이름</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" placeholder="대표 번호" name="number" id="number" class="form-control">
                        <label for="number" class="form-label">대표 번호</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" placeholder="메인 메뉴" name="main" id="main" class="form-control">
                        <label for="number" class="form-label">메인 메뉴</label>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex">
                            <input type="text" id="address" placeholder="주소" name="address" class="form-control me-2"
                                   readonly>
                            <input class="btn btn-secondary" type="button" onclick="findAddress();" value="주소 찾기">
                        </div>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Default checkbox
                        </label>
                    </div>
                    <input class="btn btn-secondary" type="submit" value="등록" id="regBtn">
                </form>
            </div>
        </div>
    </div>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script layout:fragment="script" type='text/javascript'>
        function findAddress() {
            new daum.Postcode({
                oncomplete: function(data) {
                var addr = '';
                var extraAddr = '';
                if (data.userSelectedType === 'R') {
                    addr = data.roadAddress;
                } else {
                    addr = data.jibunAddress;
                }
                if(data.userSelectedType === 'R'){
                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                        extraAddr += data.bname;
                    }
                    if(data.buildingName !== '' && data.apartment === 'Y'){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                }
                document.getElementById("address").value = addr;
                }
            }).open();
        }

        document.querySelector("#regBtn").addEventListener('click', function() {
            if(document.querySelector("#name").value == "")
                alert("가게 이름을 입력해주세요.");
            if(document.querySelector("#address").value == "")
                alert("가게 주소를 입력해주세요.");
            if(document.querySelector("#number").value == "")
                alert("전화번호를 입력해주세요.");
            else
                document.querySelector("#regForm").submit();
        });
    </script>
</div>
</html>